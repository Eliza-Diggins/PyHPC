
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PyHPC.PyHPC_System.simulation_management &#8212; PyHPC 2023 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/PyHPC/PyHPC_System/simulation_management';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    <p class="title logo__title">PyHPC 2023 documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../api.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../installation.html">
                        PyHPC Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../software.html">
                        Software
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Configuration.html">
                        Configuration
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../api.html">
                        API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../installation.html">
                        PyHPC Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../software.html">
                        Software
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Configuration.html">
                        Configuration
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Module code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">PyHPC.PyHPC_System.simulation_management</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <h1>Source code for PyHPC.PyHPC_System.simulation_management</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Simulation management tools for the PyHPC system. The core object ``SimulationLog`` is used by the backend to</span>
<span class="sd">store and manage simulations throughout the generation pipeline.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">builtins</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="kn">import</span> <span class="nn">threading</span> <span class="k">as</span> <span class="nn">t</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getframeinfo</span><span class="p">,</span> <span class="n">stack</span>

<span class="kn">from</span> <span class="nn">PyHPC.PyHPC_Core.configuration</span> <span class="kn">import</span> <span class="n">read_config</span>
<span class="kn">from</span> <span class="nn">PyHPC.PyHPC_Core.errors</span> <span class="kn">import</span> <span class="n">PyHPC_Error</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">PyHPC.PyHPC_Core.utils</span> <span class="kn">import</span> <span class="n">NonStandardEncoder</span>
<span class="kn">from</span> <span class="nn">PyHPC.PyHPC_Utils.text_display_utilities</span> <span class="kn">import</span> <span class="n">dict_to_html</span>

<span class="c1"># generating screen locking #</span>
<span class="n">screen_lock</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># locks off multi-threaded screen.</span>
<span class="c1"># --|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--#</span>
<span class="c1"># ------------------------------------------------------ Setup ----------------------------------------------------------#</span>
<span class="c1"># --|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--#</span>
<span class="n">_location</span> <span class="o">=</span> <span class="s2">&quot;PyHPC_System&quot;</span>
<span class="n">_filename</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">_dbg_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">_location</span><span class="p">,</span> <span class="n">_filename</span><span class="p">)</span>
<span class="n">CONFIG</span> <span class="o">=</span> <span class="n">read_config</span><span class="p">()</span>
<span class="n">modlog</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">_structure_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                               <span class="s2">&quot;simlog_struct.json&quot;</span><span class="p">)</span>

<span class="c1"># - managing warnings -#</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">CONFIG</span><span class="p">[</span><span class="s2">&quot;System&quot;</span><span class="p">][</span><span class="s2">&quot;Logging&quot;</span><span class="p">][</span><span class="s2">&quot;warnings&quot;</span><span class="p">]:</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>


<span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
<span class="c1"># Simulation Log Object ============================================================================================== #</span>
<span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
<div class="viewcode-block" id="SimulationLog"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.html#PyHPC.PyHPC_System.simulation_management.SimulationLog">[docs]</a><span class="k">class</span> <span class="nc">SimulationLog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ``SimulationLog`` class to manage the simulations stored on the drive.</span>

<span class="sd">    :param path: The filepath at which to locate the simulation log file (``.json``)</span>

<span class="sd">    ---</span>

<span class="sd">    ## Formatting ``SimulationLog`` Objects</span>

<span class="sd">    The purpose of the simulation logging module is to keep track of active simulations in the research</span>
<span class="sd">    stream in as seamless a way as possible. The following are of core importance for use of the system</span>

<span class="sd">    - The &lt;b&gt;root&lt;/b&gt; of any entry in the simulation log is the &lt;u&gt;initial condition file&lt;/u&gt;</span>
<span class="sd">        - The intention here is that for any given physical setup, there may be many simulations</span>
<span class="sd">          of interest which need to all be tracked and which may have different ``.nml`` and ``.slurm`` files.</span>
<span class="sd">    - The simulation log pertinent to your installation is located at ``/bin/simLog.json`` and prescribes to &lt;u&gt;all&lt;/u&gt; of</span>
<span class="sd">      the formatting restrictions of ``.json`` type files.</span>

<span class="sd">    ## Formatting</span>

<span class="sd">    The format of a single entry is as follows:</span>

<span class="sd">    ```json</span>
<span class="sd">    {</span>
<span class="sd">      &#39;&lt;initial_condition_file_path&gt;&#39;: {</span>
<span class="sd">        &quot;information&quot;: &quot;&lt;user input information&gt;&quot;,</span>
<span class="sd">        &quot;meta&quot;: {</span>
<span class="sd">          &quot;dateCreated&quot;: &quot;&quot;,</span>
<span class="sd">          &quot;lastEdited&quot;: &quot;&quot;,</span>
<span class="sd">          &quot;&lt;further meta data&gt;&quot;: &quot;&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;simulations&quot;: {</span>
<span class="sd">          &quot;&lt;simulation 1&gt;&quot;: {</span>
<span class="sd">            &quot;keys&quot;: &quot;values&quot;</span>
<span class="sd">          }</span>
<span class="sd">        },</span>
<span class="sd">        &quot;core&quot;: {</span>
<span class="sd">        },</span>
<span class="sd">        &quot;action_log&quot;:{</span>
<span class="sd">        },</span>
<span class="sd">      }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>

<span class="sd">    meta data can be added to the entry as needed as the system &lt;u&gt;never enforces a key list&lt;/u&gt;. If the user is</span>
<span class="sd">    benefitted by adding additional information, then they may do so without issue. There are a few required pieces</span>
<span class="sd">    of information required for every entry:</span>

<span class="sd">    ```json</span>
<span class="sd">    {</span>
<span class="sd">      &quot;&lt;initial_condition_file_path&gt;&quot;: {</span>
<span class="sd">        &quot;information&quot;: &quot;(Can be blank, but must be present)&quot;,</span>
<span class="sd">        &quot;meta&quot;: {</span>
<span class="sd">          &quot;dateCreated&quot;: &quot;the timestap for creation&quot;,</span>
<span class="sd">          &quot;software&quot;: &quot;the software used to generate the .nml file&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;simulations&quot;: {</span>
<span class="sd">        },</span>
<span class="sd">        &quot;action_log&quot;:{</span>
<span class="sd">        }</span>
<span class="sd">      }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>

<span class="sd">    The user &lt;b&gt;must specify: ``information``,``meta``,``simulations``,and``core``&lt;/b&gt;.</span>

<span class="sd">    ## Simulations</span>

<span class="sd">    Simulations are logged as subsets of the ``initial_condition_file`` objects in the database. This means that they hold a</span>
<span class="sd">    format</span>
<span class="sd">    of there own. Like the initial conditions, the &lt;b&gt;root&lt;/b&gt; of any ``simulation`` in the log is the ``.nml`` file. The</span>
<span class="sd">    simulation takes the</span>
<span class="sd">    following format</span>

<span class="sd">    ```json</span>
<span class="sd">    {</span>
<span class="sd">      &quot;simulations&quot;: {</span>
<span class="sd">        &quot;&lt;.nml file (or equivalent for other software&gt;&quot;: {</span>
<span class="sd">          &quot;information&quot;: &quot;Filled by the user to record important simulation notes.&quot;,</span>
<span class="sd">          &quot;action_log&quot;: {</span>
<span class="sd">            &quot;action&quot;: &quot;information&quot;</span>
<span class="sd">          },</span>
<span class="sd">          &quot;meta&quot;: {</span>
<span class="sd">          },</span>
<span class="sd">          &quot;core&quot;: {</span>
<span class="sd">          },</span>
<span class="sd">          &quot;outputs&quot;: {</span>
<span class="sd">          }</span>
<span class="sd">        }</span>
<span class="sd">      }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>

<span class="sd">    Again, there is no hard enforcement of the format. There are a few required keys for adding a simulation; an example of</span>
<span class="sd">    a very basic simulation</span>
<span class="sd">    being added to the simulation log might look like</span>

<span class="sd">    ```json</span>
<span class="sd">    {</span>
<span class="sd">      &quot;simulations&quot;: {</span>
<span class="sd">        &quot;example.nml&quot;: {</span>
<span class="sd">          &quot;information&quot;: &quot;A dummy simulation for use as an example.&quot;,</span>
<span class="sd">          &quot;action_log&quot;: {</span>
<span class="sd">          },</span>
<span class="sd">          &quot;meta&quot;: {</span>
<span class="sd">            &quot;fileCreated&quot;: &quot;01-01-1000&quot;</span>
<span class="sd">          },</span>
<span class="sd">          &quot;core&quot;: {</span>
<span class="sd">          },</span>
<span class="sd">          &quot;outputs&quot;: {</span>
<span class="sd">          }</span>
<span class="sd">        }</span>
<span class="sd">      }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SimulationLog.__init__"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.__init__.html#PyHPC.PyHPC_System.simulation_management.SimulationLog.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#  Introduction debug</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading a SimulationLog from path </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>

        <span class="c1">#  Path Coercion</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="c1">#: The path variable indicating the location of the underlying ``.json`` file.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">[</span><span class="s2">&quot;System&quot;</span><span class="p">][</span><span class="s2">&quot;Directories&quot;</span><span class="p">][</span><span class="s2">&quot;bin&quot;</span><span class="p">],</span> <span class="s2">&quot;configs&quot;</span><span class="p">,</span> <span class="s2">&quot;Simlog.json&quot;</span><span class="p">)</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;self.path was None, loading simulationlog from default location </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># Reading the path data</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="c1">#: ``self.raw`` (``dict``) is the core variable containing the raw data</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">simfile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">simfile</span><span class="p">)</span></div>

    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1"># Defining and Managing Properties =============================================================================== #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Contains the dictionary of ``InitCon`` objects to use during execution.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        val : ``dict``</span>
<span class="sd">            The dictionary of ``InitCon`` objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">InitCon</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">listed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1"># Dunder Methods ================================================================================================= #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the representation string for the ``SimulationLog`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;SimulationLog @ </span><span class="si">%(path)s</span><span class="s2">; len=</span><span class="si">%(len)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ics</span><span class="p">)}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines ths string representation of the ``SimulationLog`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;SimulationLog @ </span><span class="si">%(path)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the capacity to get items from the ``self.raw`` variable.</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item ``list``: The item position to pull from.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``dict``: The dictionary sub-position generated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">getitem</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ics</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to find key path </span><span class="si">%s</span><span class="s2"> in self.raw for SimulationLog object </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="fm">__missing__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">keys</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ics</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ics</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key_list</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">key_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ics</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="SimulationLog.get_simulation_records"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.get_simulation_records.html#PyHPC.PyHPC_System.simulation_management.SimulationLog.get_simulation_records">[docs]</a>    <span class="k">def</span> <span class="nf">get_simulation_records</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches all of the ``SimRec`` objects in the ``SimulationLog``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Dictionary of all of the ``SimRec`` objects in the format ``{name:SimRec}``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ics</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">obs</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">obs</span><span class="p">,</span> <span class="o">**</span><span class="n">ic</span><span class="o">.</span><span class="n">sims</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">obs</span></div>

<div class="viewcode-block" id="SimulationLog.search"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.search.html#PyHPC.PyHPC_System.simulation_management.SimulationLog.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">search_kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
               <span class="n">search_for</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sim&quot;</span><span class="p">,</span>
               <span class="n">return_by</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sim&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches the ``SimulationLog`` object for entries with data matching those stated in the ``search_kwargs``.</span>
<span class="sd">        The ``search_for`` and ``return_by`` parameters can be used to control the granularity of the search.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        search_kwargs : ``dict``</span>
<span class="sd">            The ``kwargs`` to use for the search. Should be a set of ``{k:v,...}``.</span>
<span class="sd">            All objects matching the level of granularity specified by ``search_for`` will be queried to see if ``obj.raw`` includes the given kwargs.</span>
<span class="sd">            If the ``kwargs`` dictionary has ``list`` type entries, the search will be done based on an ``OR`` boolean search approach.</span>
<span class="sd">            Individual entries in the ``kwargs`` are searched based on ``AND`` booleans.</span>
<span class="sd">        search_for : ``str``</span>
<span class="sd">            The level of granularity to use in the search. can be ``sim`` or ``ic``.</span>
<span class="sd">        return_by : ``str``</span>
<span class="sd">            The level of granularity to return by. Can be ``sim`` or ``ic``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Returns a list of matching objects.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Logging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Searching </span><span class="si">%s</span><span class="s2"> for </span><span class="si">%s</span><span class="s2"> by </span><span class="si">%s</span><span class="s2"> and for </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">search_kwargs</span><span class="p">,</span> <span class="n">search_for</span><span class="p">,</span> <span class="n">return_by</span><span class="p">))</span>

        <span class="c1">#  Grabbing necessary pieces of data.</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">search_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ics</span> <span class="k">if</span> <span class="n">search_for</span> <span class="o">==</span> <span class="s2">&quot;ic&quot;</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_records</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Search for </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2"> has </span><span class="si">%s</span><span class="s2"> search items.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">search_kwargs</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">search_group</span><span class="p">)))</span>

        <span class="c1"># Performing the group search</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">return_group</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">search_group</span> <span class="k">if</span> <span class="nb">all</span><span class="p">(</span>
            <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">in</span> <span class="n">value</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">item</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">search_kwargs</span><span class="p">)]</span>

        <span class="c1">#  Unsorting</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="n">return_by</span> <span class="o">==</span> <span class="n">search_for</span><span class="p">:</span>
            <span class="c1"># Return by and search for are the same so we can return exactly what we found.</span>
            <span class="k">return</span> <span class="n">return_group</span>
        <span class="k">elif</span> <span class="n">search_for</span> <span class="o">==</span> <span class="s2">&quot;ics&quot;</span><span class="p">:</span>
            <span class="c1"># search for is ics, return by is sims, so we need to get a list of all such simulations.</span>
            <span class="n">ret_group</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">return_group</span><span class="p">:</span>
                <span class="n">ret_group</span> <span class="o">+=</span> <span class="n">item</span><span class="o">.</span><span class="n">sims</span>

            <span class="k">return</span> <span class="n">ret_group</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Search is for sims, but we want to return ics.</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">parent</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">return_group</span><span class="p">]))</span></div>

<div class="viewcode-block" id="SimulationLog.add"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.add.html#PyHPC.PyHPC_System.simulation_management.SimulationLog.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">auto_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        adds the entry contained in ``**kwargs`` to the ``SimulationLog`` object. The ``entries`` may contain any number</span>
<span class="sd">        of individual (&lt;u&gt;correctly formatted&lt;/u&gt;) entries to add.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        auto_save : bool</span>
<span class="sd">            ``auto_save=True`` will immediately write the simulation log to file once alterations are made.</span>
<span class="sd">        entries : dict</span>
<span class="sd">            The entries to add to the ``SimulationLog``. Each entry should have the standard format:</span>

<span class="sd">            ```</span>
<span class="sd">            {</span>
<span class="sd">              &#39;&lt;initial_condition_file_path&gt;&#39;: {</span>
<span class="sd">                &quot;information&quot;: &quot;&lt;user input information&gt;&quot;,</span>
<span class="sd">                &quot;meta&quot;: {</span>
<span class="sd">                  &quot;dateCreated&quot;: &quot;&quot;,</span>
<span class="sd">                  &quot;lastEdited&quot;: &quot;&quot;,</span>
<span class="sd">                  &quot;&lt;further meta data&gt;&quot;: &quot;&quot;</span>
<span class="sd">                },</span>
<span class="sd">                &quot;simulations&quot;: {</span>
<span class="sd">                  &quot;&lt;simulation 1&gt;&quot;: {</span>
<span class="sd">                    &quot;keys&quot;: &quot;values&quot;</span>
<span class="sd">                  }</span>
<span class="sd">                },</span>
<span class="sd">                &quot;core&quot;: {</span>
<span class="sd">                }</span>
<span class="sd">              }</span>
<span class="sd">            }</span>
<span class="sd">            ```</span>
<span class="sd">        force : bool</span>
<span class="sd">            Forces the Simulation log to accommodate the structure used regardless of if it meets the standard format</span>
<span class="sd">            ..warning:: This could have catastrophic consequences and should be used only if sure of the result.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Debugging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Checking structure</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>

            <span class="c1"># - Loading the structure information -#</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_structure_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">struc_file</span><span class="p">:</span>
                    <span class="n">_struct</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">struc_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>

            <span class="c1">#  Cleaning up the structure</span>
            <span class="c1"># -------------------------------------------------------------------------------------------------------- #</span>
            <span class="c1">##- Trying to add any issues -##</span>
            <span class="n">generation_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>
            <span class="n">new_entries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1"># - Adding necessary headers -#</span>
                <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;information&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;simulations&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span><span class="s2">&quot;action_log&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{},</span> <span class="p">{},{}]):</span>
                    <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                        <span class="n">new</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>

                <span class="c1"># - Dealing with specialized items -#</span>
                <span class="k">if</span> <span class="s2">&quot;dateCreated&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;dateCreated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generation_time</span>
                <span class="k">if</span> <span class="s2">&quot;lastEdited&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;lastEdited&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generation_time</span>

                <span class="n">new_entries</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="n">new_entries</span>

            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_dictionary_structure</span><span class="p">(</span><span class="n">_struct</span><span class="p">[</span><span class="s2">&quot;SimulationLog&quot;</span><span class="p">][</span><span class="s2">&quot;format&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span>
                        <span class="s2">&quot;SimulationLog </span><span class="si">%s</span><span class="s2"> failed to add entry </span><span class="si">%s</span><span class="s2"> due to item </span><span class="si">%s</span><span class="s2"> which failed to match structure.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">entries</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;parameter ``force`` was specified in execution of SimulationLog.add on </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Adding</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="o">**</span><span class="n">entries</span><span class="p">}</span>

        <span class="c1">#  Managing Saves</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="n">auto_save</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>

<div class="viewcode-block" id="SimulationLog.save"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimulationLog.save.html#PyHPC.PyHPC_System.simulation_management.SimulationLog.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current simulation log.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Debugging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Saving </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="c1">#  Saving</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">simlog_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="n">simlog_file</span><span class="p">,</span><span class="bp">cls</span><span class="o">=</span><span class="n">NonStandardEncoder</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="InitCon"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.html#PyHPC.PyHPC_System.simulation_management.InitCon">[docs]</a><span class="k">class</span> <span class="nc">InitCon</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The ``InitCon`` object is a container for an initial condition file (typically a ``.dat`` or ``.g2`` file). These form</span>
<span class="sd">    the individual sub-units of the ``SimulationLog`` object and can be accessed using the ``SimulationLog.ics`` method.</span>

<span class="sd">    ---</span>

<span class="sd">    **Formatting**:</span>

<span class="sd">    ```json</span>
<span class="sd">    &#39;&lt;initial_condition_file_path&gt;&#39;: {</span>
<span class="sd">        &quot;information&quot;: &quot;&lt;user input information&gt;&quot;,</span>
<span class="sd">        &quot;meta&quot;: {</span>
<span class="sd">          &quot;dateCreated&quot;: &quot;&quot;,</span>
<span class="sd">          &quot;lastEdited&quot;: &quot;&quot;,</span>
<span class="sd">          &quot;&lt;further meta data&gt;&quot;: &quot;&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;simulations&quot;: {</span>
<span class="sd">          &quot;&lt;simulation 1&gt;&quot;: {</span>
<span class="sd">            &quot;keys&quot;: &quot;values&quot;</span>
<span class="sd">          }</span>
<span class="sd">        },</span>
<span class="sd">        &quot;core&quot;: {</span>
<span class="sd">        }</span>
<span class="sd">      }</span>
<span class="sd">    ```</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="InitCon.__init__"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.__init__.html#PyHPC.PyHPC_System.simulation_management.InitCon.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#: ``self.parent`` is a reference to the parent object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1">#: ``self.name`` contains the key value of the entry in the ``SimulationLog`` object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="c1">#: ``self.raw`` is the core information in the ``InitCon`` object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="n">raw</span></div>

    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1"># Managing Properties   ========================================================================================== #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.sims`` contains all of the ``SimRec`` objects in the simulation.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">SimRec</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">listed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">core</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.core``  contains all of the core information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.inf`` contains all of the description information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;information&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.meta`` contains all of the meta information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1">#  Dunder Methods ================================================================================================ #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the representation string for the ``SimulationLog`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;InitCon @ </span><span class="si">%(name)s</span><span class="s2">; len=</span><span class="si">%(len)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sims</span><span class="p">)}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines ths string representation of the ``InitCon`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;InitCon @ </span><span class="si">%(name)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_map</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the capacity to get items from the ``self.raw`` variable.</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_map ``list``: The item position to pull from.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``dict``: The dictionary sub-position generated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item_map</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">item_map</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_map</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">getitem</span><span class="p">,</span> <span class="n">item_map</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sims</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to find key path </span><span class="si">%s</span><span class="s2"> in self.raw for InitCon object </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item_map</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="fm">__missing__</span><span class="p">(</span><span class="n">item_map</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">keys</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sims</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sims</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key_list</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">key_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="InitCon.add"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.add.html#PyHPC.PyHPC_System.simulation_management.InitCon.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">auto_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        adds the entry contained in ``**kwargs`` to the ``InitCon`` object. The ``entries`` may contain any number</span>
<span class="sd">        of individual (&lt;u&gt;correctly formatted&lt;/u&gt;) entries to add.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        auto_save : bool</span>
<span class="sd">            ``auto_save=True`` will immediately write the simulation log to file once alterations are made.</span>
<span class="sd">        entries : dict</span>
<span class="sd">            The entries to add to the ``InitCon``. Each entry should have the standard format:</span>

<span class="sd">            ```</span>
<span class="sd">             &quot;format&quot;: {</span>
<span class="sd">              &quot;information&quot;: &quot;str&quot;,</span>
<span class="sd">              &quot;action_log&quot;: {</span>
<span class="sd">              },</span>
<span class="sd">              &quot;meta&quot;: {</span>
<span class="sd">              },</span>
<span class="sd">              &quot;core&quot;: {</span>
<span class="sd">              },</span>
<span class="sd">              &quot;outputs&quot;: {</span>
<span class="sd">              }</span>
<span class="sd">            }</span>
<span class="sd">            ```</span>
<span class="sd">        force : bool</span>
<span class="sd">            Forces the Simulation log to accommodate the structure used regardless of if it meets the standard format</span>
<span class="sd">            ..warning:: This could have catastrophic consequences and should be used only if sure of the result.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Debugging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Checking structure</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>

            <span class="c1"># - Loading the structure information -#</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_structure_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">struc_file</span><span class="p">:</span>
                    <span class="n">_struct</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">struc_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>

            <span class="c1">#  Cleaning up the structure</span>
            <span class="c1"># -------------------------------------------------------------------------------------------------------- #</span>
            <span class="c1">##- Trying to add any issues -##</span>
            <span class="n">generation_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>
            <span class="n">new_entries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1"># - Adding necessary headers -#</span>
                <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;information&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;action_log&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;outputs&quot;</span><span class="p">,</span><span class="s2">&quot;components&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{},</span> <span class="p">{},</span> <span class="p">{},{}]):</span>
                    <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                        <span class="n">new</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>

                <span class="c1"># - Dealing with specialized items -#</span>
                <span class="k">if</span> <span class="s2">&quot;dateCreated&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;dateCreated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generation_time</span>
                <span class="k">if</span> <span class="s2">&quot;lastEdited&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;lastEdited&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generation_time</span>
                <span class="k">if</span> <span class="s2">&quot;software&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;software&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NA&quot;</span>

                <span class="n">new_entries</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="n">new_entries</span>

            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_dictionary_structure</span><span class="p">(</span><span class="n">_struct</span><span class="p">[</span><span class="s2">&quot;InitCon&quot;</span><span class="p">][</span><span class="s2">&quot;format&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span>
                        <span class="s2">&quot;InitCon </span><span class="si">%s</span><span class="s2"> failed to add entry </span><span class="si">%s</span><span class="s2"> due to item </span><span class="si">%s</span><span class="s2"> which failed to match structure.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">entries</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;parameter ``force`` was specified in execution of InitCon.add on </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Adding</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">entries</span><span class="p">}</span>

        <span class="c1">#  Managing Saves</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="n">auto_save</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>

<div class="viewcode-block" id="InitCon.save"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.save.html#PyHPC.PyHPC_System.simulation_management.InitCon.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>

<div class="viewcode-block" id="InitCon.delete"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.delete.html#PyHPC.PyHPC_System.simulation_management.InitCon.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>
<div class="viewcode-block" id="InitCon.to_html"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.to_html.html#PyHPC.PyHPC_System.simulation_management.InitCon.to_html">[docs]</a>    <span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes the init_log to a system of ``html`` files at the ``output`` location.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        output: The ``path`` to the output directory.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Debugging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating html output of </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">())</span>

        <span class="c1">#  Managing the directory</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;InitCons&quot;</span><span class="p">)):</span>
            <span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;InitCons&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generated output directory </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;InitCons&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found output directory </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;InitCons&quot;</span><span class="p">))</span>

        <span class="c1">#  Generating the first table</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">table_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span>        <span class="p">:</span> <span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;Date Created&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;dateCreated&quot;</span><span class="p">],</span>
                <span class="s2">&quot;Last Edited&quot;</span> <span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;lastEdited&quot;</span><span class="p">],</span>
                <span class="s2">&quot;# of Sims&quot;</span>   <span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">])</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;InitCons&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.html&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;templates&quot;</span><span class="p">,</span> <span class="s2">&quot;simlog_html_1.html&quot;</span><span class="p">),</span>
                      <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">template</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;table&quot;</span><span class="p">:</span> <span class="n">dict_to_html</span><span class="p">(</span><span class="n">table_data</span><span class="p">),</span>
                                           <span class="s2">&quot;path&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">path</span><span class="p">})</span></div>

<div class="viewcode-block" id="InitCon.log"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.InitCon.log.html#PyHPC.PyHPC_System.simulation_management.InitCon.log">[docs]</a>    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">auto_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        logs the ``message`` to the ``self.raw.action_log``. Additional entries in the record are specified with ``**kwargs``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        message : str</span>
<span class="sd">            The message to log with the entry.</span>
<span class="sd">        action : str</span>
<span class="sd">            The specific action being under-taken. These actions can be arbitrary, but should be consistent for</span>
<span class="sd">            best impact.</span>
<span class="sd">        auto_save : bool</span>
<span class="sd">            ``True`` to automatically write all of the data to file.</span>
<span class="sd">        kwargs : optional</span>
<span class="sd">            Additional attributes to log with the message. All entries should be ``key=&quot;string&quot;``. If entries overlap</span>
<span class="sd">            with required log elements ``[msg,lineno,file,act,time]``, then they are overridden by the values given.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Managing the required kwargs</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">caller</span> <span class="o">=</span> <span class="n">getframeinfo</span><span class="p">(</span><span class="n">stack</span><span class="p">()[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># -&gt; grabbing frame info</span>
        <span class="n">req_entries</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># These are the required keys that are always present in the entry.</span>
            <span class="s2">&quot;msg&quot;</span>   <span class="p">:</span> <span class="n">message</span><span class="p">,</span>
            <span class="s2">&quot;act&quot;</span>   <span class="p">:</span> <span class="n">action</span><span class="p">,</span>
            <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="n">caller</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
            <span class="s2">&quot;file&quot;</span>  <span class="p">:</span> <span class="n">caller</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
            <span class="s2">&quot;time&quot;</span>  <span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>

        <span class="p">}</span>

        <span class="c1">#  Managing additional entries</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">req_entries</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>

        <span class="c1">#  Logging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">log_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;action_log&quot;</span><span class="p">][</span><span class="n">log_time</span><span class="p">]</span> <span class="o">=</span> <span class="n">entries</span>

        <span class="k">if</span> <span class="n">auto_save</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div></div>
<div class="viewcode-block" id="SimRec"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.html#PyHPC.PyHPC_System.simulation_management.SimRec">[docs]</a><span class="k">class</span> <span class="nc">SimRec</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The ``SimRec`` class contains all of the information for a single simulation record in the ``SimulationLog`` system.</span>
<span class="sd">    This is the most granular view available in the ``SimulationLog`` hierarchy.</span>

<span class="sd">    **Formatting**:</span>

<span class="sd">    ---</span>
<span class="sd">    ```</span>
<span class="sd">    {</span>
<span class="sd">        &quot;simulations&quot;: {</span>
<span class="sd">            &quot;&lt;.nml file (or equivalent for other software&gt;&quot;: {</span>
<span class="sd">              &quot;information&quot;: &quot;Filled by the user to record important simulation notes.&quot;,</span>
<span class="sd">              &quot;action_log&quot;: {</span>
<span class="sd">                &quot;action&quot;: &quot;information&quot;</span>
<span class="sd">              },</span>
<span class="sd">              &quot;meta&quot;: {</span>
<span class="sd">              },</span>
<span class="sd">              &quot;core&quot;: {</span>
<span class="sd">              },</span>
<span class="sd">              &quot;outputs&quot;: {</span>
<span class="sd">              }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SimRec.__init__"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.__init__.html#PyHPC.PyHPC_System.simulation_management.SimRec.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#  Initializing the core variables.</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="c1">#: ``self.parent`` is a reference to the parent object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1">#: ``self.name`` contains the &lt;u&gt;absolute path&lt;/u&gt; to the ``.nml`` file or equivalent init file for runtime use.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="c1">#: ``self.raw`` contains all of the raw data provided in the ``SimRec`` object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="n">data</span></div>

    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1"># Managing Properties   ========================================================================================== #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.outputs`` Contains all of the outputs for the ``SimRec`` object.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">listed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">core</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.core``  contains all of the core information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.inf`` contains all of the description information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;information&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">meta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;``self.meta`` contains all of the meta information for this entry.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="c1">#  Dunder Methods ================================================================================================ #</span>
    <span class="c1"># ---------------------------------------------------------------------------------------------------------------- #</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the representation string for the ``SimulationLog`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;SimRec @ </span><span class="si">%(name)s</span><span class="s2">; len=</span><span class="si">%(len)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;len&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">)}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines ths string representation of the ``InitCon`` object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;SimRec @ </span><span class="si">%(name)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the capacity to get items from the ``self.raw`` variable.</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item ``list``: The item position to pull from.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``dict``: The dictionary sub-position generated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">getitem</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s2">&quot;Failed to find key path </span><span class="si">%s</span><span class="s2"> in self.raw for SimRec object </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="fm">__missing__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">keys</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if the ``SimRec`` includes an output record which matches the ``path``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path: (``str`` or ``pathlib.Path``) the path to the output directory to be checked.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``bool``</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key_list</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">key_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="SimRec.log"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.log.html#PyHPC.PyHPC_System.simulation_management.SimRec.log">[docs]</a>    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">auto_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        logs the ``message`` to the ``self.raw.action_log``. Additional entries in the record are specified with ``**kwargs``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        message : str</span>
<span class="sd">            The message to log with the entry.</span>
<span class="sd">        action : str</span>
<span class="sd">            The specific action being under-taken. These actions can be arbitrary, but should be consistent for</span>
<span class="sd">            best impact.</span>
<span class="sd">        auto_save : bool</span>
<span class="sd">            ``True`` to automatically write all of the data to file.</span>
<span class="sd">        kwargs : optional</span>
<span class="sd">            Additional attributes to log with the message. All entries should be ``key=&quot;string&quot;``. If entries overlap</span>
<span class="sd">            with required log elements ``[msg,lineno,file,act,time]``, then they are overridden by the values given.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Managing the required kwargs</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">caller</span> <span class="o">=</span> <span class="n">getframeinfo</span><span class="p">(</span><span class="n">stack</span><span class="p">()[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># -&gt; grabbing frame info</span>
        <span class="n">req_entries</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># These are the required keys that are always present in the entry.</span>
            <span class="s2">&quot;msg&quot;</span>   <span class="p">:</span> <span class="n">message</span><span class="p">,</span>
            <span class="s2">&quot;act&quot;</span>   <span class="p">:</span> <span class="n">action</span><span class="p">,</span>
            <span class="s2">&quot;lineno&quot;</span><span class="p">:</span> <span class="n">caller</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
            <span class="s2">&quot;file&quot;</span>  <span class="p">:</span> <span class="n">caller</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
            <span class="s2">&quot;time&quot;</span>  <span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>

        <span class="p">}</span>

        <span class="c1">#  Managing additional entries</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">req_entries</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>

        <span class="c1">#  Logging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">log_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;action_log&quot;</span><span class="p">][</span><span class="n">log_time</span><span class="p">]</span> <span class="o">=</span> <span class="n">entries</span>

        <span class="k">if</span> <span class="n">auto_save</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>

<div class="viewcode-block" id="SimRec.save"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.save.html#PyHPC.PyHPC_System.simulation_management.SimRec.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>
<div class="viewcode-block" id="SimRec.delete"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.delete.html#PyHPC.PyHPC_System.simulation_management.SimRec.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;simulations&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>
<div class="viewcode-block" id="SimRec.add"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.SimRec.add.html#PyHPC.PyHPC_System.simulation_management.SimRec.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">,</span> <span class="n">auto_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the data contained in ``entries`` to the ``SimRec`` object&#39;s ``outputs`` dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        entries : list of dict</span>
<span class="sd">            The entries to add to the ``SimRec``. These should have the following format:</span>

<span class="sd">            .. code-block:: json</span>
<span class="sd">                {</span>
<span class="sd">                &quot;&lt;Output Directory 1&gt; : {</span>
<span class="sd">                    &quot;information&quot;: &quot;&lt;some information&gt;&quot;,</span>
<span class="sd">                    &quot;meta&quot;: {</span>
<span class="sd">                        &quot;dateCreated&quot; : &quot;&quot;,</span>
<span class="sd">                        &quot;hasRun&quot; : true,</span>
<span class="sd">                        }</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">        </span>
<span class="sd">        auto_save : bool</span>
<span class="sd">            ``True`` will cause the object to autosave.</span>
<span class="sd">        force : bool</span>
<span class="sd">            If ``True``, will force the addition even if it comes back with an addition structure failure.</span>
<span class="sd">            </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  Debugging</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Adding </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Checking structure</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>

            <span class="c1"># - Loading the structure information -#</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_structure_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">struc_file</span><span class="p">:</span>
                    <span class="n">_struct</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">struc_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to locate the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">:</span>
                <span class="n">modlog</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">PyHPC_Error</span><span class="p">(</span>
                    <span class="s2">&quot;Failed to parse the simulation log structure file at </span><span class="si">%s</span><span class="s2">. Check installation.&quot;</span> <span class="o">%</span> <span class="n">_structure_file</span><span class="p">)</span>

            <span class="c1">#  Cleaning up the structure</span>
            <span class="c1"># -------------------------------------------------------------------------------------------------------- #</span>
            <span class="c1">##- Trying to add any issues -##</span>
            <span class="n">generation_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%m-</span><span class="si">%d</span><span class="s1">-%Y_%H-%M-%S&#39;</span><span class="p">)</span>
            <span class="n">new_entries</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">new</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1"># - Adding necessary headers -#</span>
                <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;information&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span><span class="s2">&quot;action_log&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},{}]):</span>
                    <span class="k">if</span> <span class="n">header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                        <span class="n">new</span><span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>

                <span class="c1"># - Dealing with specialized items -#</span>
                <span class="k">if</span> <span class="s2">&quot;dateCreated&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;dateCreated&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">generation_time</span>
                <span class="k">if</span> <span class="s2">&quot;isRun&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;isRun&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="s2">&quot;slurm_path&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]:</span>
                    <span class="n">new</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;slurm_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>

                <span class="n">new_entries</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="n">new_entries</span>

            <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_dictionary_structure</span><span class="p">(</span><span class="n">_struct</span><span class="p">[</span><span class="s2">&quot;SimRec&quot;</span><span class="p">][</span><span class="s2">&quot;format&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span>
                        <span class="s2">&quot;InitCon </span><span class="si">%s</span><span class="s2"> failed to add entry </span><span class="si">%s</span><span class="s2"> due to item </span><span class="si">%s</span><span class="s2"> which failed to match structure.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">entries</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;parameter ``force`` was specified in execution of InitCon.add on </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

        <span class="c1">#  Adding</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">entries</span><span class="p">}</span>

        <span class="c1">#  Managing Saves</span>
        <span class="c1"># ------------------------------------------------------------------------------------------------------------ #</span>
        <span class="k">if</span> <span class="n">auto_save</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div></div>

<span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
<span class="c1"># Sub Functions ====================================================================================================== #</span>
<span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
<div class="viewcode-block" id="check_dictionary_structure"><a class="viewcode-back" href="../../../_as_gen/PyHPC.PyHPC_System.simulation_management.check_dictionary_structure.html#PyHPC.PyHPC_System.simulation_management.check_dictionary_structure">[docs]</a><span class="k">def</span> <span class="nf">check_dictionary_structure</span><span class="p">(</span><span class="n">master</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">base</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    checks the dictionary structure of ``base`` against the ``master`` copy and returns ``True`` if the structure</span>
<span class="sd">    matches and ``False`` if the structure fails to correctly match.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    master: dict</span>
<span class="sd">        The master dictionary containing the structure. The structure is checked as follows:</span>

<span class="sd">        1. For each ``key:value`` pair in the dictionary</span>
<span class="sd">            - If ``value`` is an &lt;u&gt;empty&lt;/u&gt; ``dict``, then ``key`` must be in ``base``, but no further checks are made.</span>
<span class="sd">            - If ``value`` is &lt;u&gt;non-empty&lt;/u&gt;, then the algorithm proceeds recursively to each ``key:value`` pair.</span>
<span class="sd">            - If ``value`` is a ``str``, then ``value`` should represent a ``type`` and is checked against the type.</span>

<span class="sd">    base: dict</span>
<span class="sd">        The base dictionary to check against the master dictionary.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    value : bool</span>
<span class="sd">        The output value of the check. If ``True``, the structures match.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># -&gt; this is used to check for the match throughout.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">master</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">base</span><span class="p">:</span>
            <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;key </span><span class="si">%s</span><span class="s2"> not in base (</span><span class="si">%s</span><span class="s2">), result = False&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">and</span> <span class="n">check_dictionary_structure</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">base</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">builtins</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">builtins</span><span class="p">,</span> <span class="n">value</span><span class="p">)):</span>
                    <span class="n">modlog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;key </span><span class="si">%s</span><span class="s2"> of base </span><span class="si">%s</span><span class="s2"> failed to match type </span><span class="si">%s</span><span class="s2">, result = </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">result</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="k">return</span> <span class="n">result</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">simlog</span> <span class="o">=</span> <span class="n">SimulationLog</span><span class="p">()</span>
</pre></div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, Eliza C. Diggins.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>